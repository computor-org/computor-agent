# =============================================================================
# Computor Agent - Environment Configuration
# =============================================================================
#
# Copy this file to .env and configure your settings:
#   cp docker/.env.example docker/.env
#
# WARNING: This file contains secrets. Do not commit to version control!
#

# =============================================================================
# Git Configuration (required for commits)
# =============================================================================

GIT_USER_NAME=Computor Agent
GIT_USER_EMAIL=agent@computor.local

# =============================================================================
# LLM Provider Configuration
# =============================================================================

# Provider type: ollama, lmstudio, openai, anthropic, dummy
LLM_PROVIDER=ollama

# Base URL for the LLM API
# For local LLM (Ollama/LM Studio running on host):
LLM_BASE_URL=http://host.docker.internal:11434/v1
# For OpenAI:
# LLM_BASE_URL=https://api.openai.com/v1

# Model name
LLM_MODEL=devstral-small

# Sampling temperature (0.0 - 2.0)
LLM_TEMPERATURE=0.7

# API key (required for OpenAI, Anthropic, etc.)
# LLM_API_KEY=sk-...

# =============================================================================
# Computor Backend Configuration (REQUIRED)
# =============================================================================

# Backend API URL
COMPUTOR_BACKEND_URL=https://api.computor.example.com

# Authentication - choose ONE of the following methods:

# Option 1: API Token (RECOMMENDED)
# Format: ctp_<32 random characters>
# Example: ctp_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
# COMPUTOR_BACKEND_API_TOKEN=ctp_your-api-token-here

# Option 2: Username/Password (Basic Auth)
COMPUTOR_BACKEND_USERNAME=agent-user
COMPUTOR_BACKEND_PASSWORD=your-secret-password

# Request timeout (seconds)
COMPUTOR_BACKEND_TIMEOUT=30

# =============================================================================
# Agent Configuration
# =============================================================================

# Agent display name
COMPUTOR_AGENT_NAME=Tutor AI

# Agent description (optional)
# COMPUTOR_AGENT_DESCRIPTION=Automated tutoring assistant

# =============================================================================
# Tutor Configuration - Personality
# =============================================================================

# Personality tone: friendly_professional, strict, casual, encouraging
TUTOR_PERSONALITY_TONE=friendly_professional

# Language (ISO 639-1 code)
TUTOR_LANGUAGE=en

# =============================================================================
# Tutor Configuration - Security Gate
# =============================================================================

# Enable security checks
TUTOR_SECURITY_ENABLED=true

# Require LLM confirmation of detected threats (2-phase detection)
TUTOR_SECURITY_REQUIRE_CONFIRMATION=true

# Block response if threat is confirmed
TUTOR_SECURITY_BLOCK_ON_THREAT=true

# Check student messages for prompt injection
TUTOR_SECURITY_CHECK_MESSAGES=true

# Check student code for malicious content
TUTOR_SECURITY_CHECK_CODE=true

# =============================================================================
# Tutor Configuration - Context
# =============================================================================

# Number of previous messages to include (0-20)
TUTOR_CONTEXT_PREVIOUS_MESSAGES=3

# Include tutor/lecturer comments about student
TUTOR_CONTEXT_INCLUDE_COMMENTS=true

# Include reference solution in context
TUTOR_CONTEXT_INCLUDE_REFERENCE=false

# Maximum lines of code to include (100-10000)
TUTOR_CONTEXT_MAX_CODE_LINES=1000

# Enable student notes storage (per-user UUID files)
TUTOR_CONTEXT_STUDENT_NOTES_ENABLED=false

# =============================================================================
# Tutor Configuration - Grading
# =============================================================================

# Enable automated grading for submissions
TUTOR_GRADING_ENABLED=false

# Automatically submit grades to API
TUTOR_GRADING_AUTO_SUBMIT=false

# =============================================================================
# Tutor Configuration - Scheduler
# =============================================================================

# Enable the scheduler
TUTOR_SCHEDULER_ENABLED=true

# Poll interval (seconds)
TUTOR_SCHEDULER_POLL_INTERVAL=30

# Maximum concurrent submission groups being processed
TUTOR_SCHEDULER_MAX_CONCURRENT=5

# Cooldown between processing same submission group (seconds)
TUTOR_SCHEDULER_COOLDOWN=60

# =============================================================================
# Git Credentials
# =============================================================================
#
# Git credentials are stored in a YAML file, NOT environment variables.
# Mount your credentials file into the container:
#
#   /data/config/credentials.yaml
#
# File format:
#   credentials:
#     - pattern: https://gitlab.example.com
#       token: glpat-xxxxxxxxxxxx
#     - pattern: https://gitlab.example.com/courses
#       token: glpat-yyyyyyyyyyyy
#
# See: src/computor_agent/settings/credentials.py for full documentation
